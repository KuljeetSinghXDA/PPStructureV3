# =========================
# Service settings
# =========================
APP_HOST=0.0.0.0                 # Bind address inside container; Dokploy maps domain externally.
APP_PORT=8080                    # Container port; set the same in Dokploy's container port mapping.

# =========================
# CPU performance tuning
# =========================
CPU_THREADS=4                    # PP-StructureV3 CPU inference threads (maps to cpu_threads).
OMP_NUM_THREADS=4                # OpenMP threads for underlying kernels.
MKL_NUM_THREADS=4                # MKL threads for BLAS ops.
OPENBLAS_NUM_THREADS=4           # OpenBLAS threads for BLAS ops.
ENABLE_MKLDNN=True               # Enable MKL-DNN in Paddle Inference (enable_mkldnn).

# =========================
# Pipeline toggles (optimize for English lab reports)
# =========================
USE_DOC_ORIENTATION=False        # Document orientation classification (use_doc_orientation_classify).
USE_UNWARP=False                 # Text image unwarping UVDoc (use_doc_unwarping).
USE_TEXTLINE_ORI=False           # Text line orientation classifier (use_textline_orientation).
USE_REGION_DET=True              # Region detection (use_region_detection).
USE_TABLE=True                   # Table recognition sub-pipeline (use_table_recognition).
USE_FORMULA=False                # Formula recognition sub-pipeline (use_formula_recognition).
USE_CHART=False                  # Chart parsing (use_chart_recognition).
USE_SEAL=False                   # Seal recognition sub-pipeline (use_seal_recognition).

# =========================
# Flagship model pins (names must match PP-StructureV3 registry)
# =========================
# Layout/Region
LAYOUT_MODEL=PP-DocLayout_plus-L             # Latest flagship layout model for PP-StructureV3.
REGION_MODEL=PP-DocBlockLayout               # Region/block detector for reading order stabilization.

# OCR (server/high-accuracy for English)
TEXT_DET_MODEL=PP-OCRv5_server_det           # Text detection (server).
TEXT_REC_MODEL=PP-OCRv5_server_rec           # Text recognition (server, multi-language including English).

# Table pipeline (structure/classification/cell detection)
TABLE_CLS_MODEL=PP-LCNet_x1_0_table_cls
TABLE_STRUCT_WIRED=SLANeXt_wired
TABLE_STRUCT_WIRELESS=SLANeXt_wireless
TABLE_CELL_DET_WIRED=RT-DETR-L_wired_table_cell_det
TABLE_CELL_DET_WIRELESS=RT-DETR-L_wireless_table_cell_det

# Formula pipeline (kept off by default; enable and use flagship if needed)
FORMULA_MODEL=PP-FormulaNet_plus-L

# Chart pipeline (kept off by default; enable for charts)
CHART_MODEL=PP-Chart2Table

# Seal pipeline (kept off by default; enable for stamps/seals)
SEAL_DET_MODEL=PP-OCRv4_server_seal_det

# =========================
# Batch/threshold tuning (defaults mirror docs; override as needed)
# =========================
# Layout
LAYOUT_THRESHOLD=0.5             # layout_threshold (0-1).
LAYOUT_NMS=True                  # layout_nms (bool).
LAYOUT_UNCLIP_RATIO=1.0          # layout_unclip_ratio (>0).
LAYOUT_MERGE_MODE=large          # layout_merge_bboxes_mode.

# Text detection (DB-like)
TEXT_DET_LIMIT_SIDE_LEN=960      # text_det_limit_side_len (>0).
TEXT_DET_LIMIT_TYPE=max          # text_det_limit_type: min|max.
TEXT_DET_THRESH=0.3              # text_det_thresh (>0).
TEXT_DET_BOX_THRESH=0.6          # text_det_box_thresh (>0).
TEXT_DET_UNCLIP_RATIO=2.0        # text_det_unclip_ratio (>0).

# Text recognition
TEXT_REC_BATCH=2                 # text_recognition_batch_size.
TEXT_REC_SCORE_THRESH=0.0        # text_rec_score_thresh (retain all by default).

# Textline orientation
TEXTLINE_ORI_BATCH=1             # textline_orientation_batch_size.

# Tables
CHART_BATCH=1                    # chart_recognition_batch_size.
FORMULA_BATCH=1                  # formula_recognition_batch_size.

# Seals (detector thresholds)
SEAL_DET_LIMIT_SIDE_LEN=736      # seal_det_limit_side_len.
SEAL_DET_LIMIT_TYPE=min          # seal_det_limit_type: min|max.
SEAL_DET_THRESH=0.2              # seal_det_thresh (>0).
SEAL_DET_BOX_THRESH=0.6          # seal_det_box_thresh (>0).
SEAL_DET_UNCLIP_RATIO=0.5        # seal_det_unclip_ratio (>0).

# =========================
# Device/backend (CPU-only on Ampere A1)
# =========================
DEVICE=cpu                       # device (cpu).
ENABLE_HPI=False                 # enable_hpi (High Performance Inference, keep False on CPU here).
USE_TENSORRT=False               # GPU-only; must stay False on CPU.
PRECISION=fp32                   # precision (fp32).
