# =========================
# Service settings
# =========================
APP_HOST=0.0.0.0                 # Dokploy maps the external domain to this container address [web:16]
APP_PORT=8080                    # Container port; set same in Dokploy UI mapping [web:16]

# =========================
# CPU performance tuning (Ampere A1: 4 OCPU)
# =========================
CPU_THREADS=4                    # PP-StructureV3 cpu_threads (internal threading) [web:16]
OMP_NUM_THREADS=1                # Avoid OpenMP oversubscription & OpenBLAS conflict [web:168]
MKL_NUM_THREADS=1                # Keep BLAS threads single to prevent contention [web:165]
OPENBLAS_NUM_THREADS=1           # Enforce single-thread OpenBLAS behavior [web:165]
ENABLE_MKLDNN=True               # oneDNN/MKL-DNN acceleration (benchmark True/False) [web:16]

# Optional Paddle internal thread cap (alternative to CPU_THREADS)
FLAGS_paddle_num_threads=4       # Paddle CPU threads; can be used in addition to cpu_threads [web:171]

# =========================
# Pipeline toggles (English lab reports)
# =========================
USE_DOC_ORIENTATION=False        # use_doc_orientation_classify (rotate only if needed) [web:16]
USE_UNWARP=False                 # use_doc_unwarping (enable if scans are warped) [web:16]
USE_TEXTLINE_ORI=False           # use_textline_orientation [web:16]
USE_REGION_DET=True              # use_region_detection (stabilizes reading order) [web:16]
USE_TABLE=True                   # use_table_recognition (lab reports rely on tables) [web:16]
USE_FORMULA=False                # use_formula_recognition [web:16]
USE_CHART=False                  # use_chart_recognition [web:16]
USE_SEAL=False                   # use_seal_recognition [web:16]

# =========================
# Language selection (English-only tip)
# =========================
OCR_LANG=en                      # PP-StructureV3(lang="en") picks English recognizer [web:16][web:18]

# =========================
# Flagship model pins (model registry names)
# =========================
# Layout/Region
LAYOUT_MODEL=PP-DocLayout_plus-L             # Flagship layout detector for V3 [web:99]
REGION_MODEL=PP-DocBlockLayout               # Region/block detector [web:16]

# OCR (server/high-accuracy)
TEXT_DET_MODEL=PP-OCRv5_server_det           # Text detection (server) [web:16]
TEXT_REC_MODEL=                              # Leave empty; lang=en selects English recognizer [web:16]

# Table pipeline
TABLE_CLS_MODEL=PP-LCNet_x1_0_table_cls      # Table orientation/classification [web:16]
TABLE_STRUCT_WIRED=SLANeXt_wired             # Wired table structure [web:16]
TABLE_STRUCT_WIRELESS=SLANeXt_wireless       # Wireless table structure [web:16]
TABLE_CELL_DET_WIRED=RT-DETR-L_wired_table_cell_det       # Wired cell detector [web:16]
TABLE_CELL_DET_WIRELESS=RT-DETR-L_wireless_table_cell_det # Wireless cell detector [web:16]

# Optional modules (disabled above; names set for quick enable)
FORMULA_MODEL=PP-FormulaNet_plus-L           # Formula recognition [web:16]
CHART_MODEL=PP-Chart2Table                   # Chart-to-table parser [web:16]
SEAL_DET_MODEL=PP-OCRv4_server_seal_det      # Seal/stamp detector [web:16]

# =========================
# Batch/threshold tuning
# =========================
# Layout
LAYOUT_THRESHOLD=0.5             # layout_threshold [web:16]
LAYOUT_NMS=True                  # layout_nms [web:16]
LAYOUT_UNCLIP_RATIO=1.0          # layout_unclip_ratio [web:16]
LAYOUT_MERGE_MODE=large          # layout_merge_bboxes_mode [web:16]

# Text detection
TEXT_DET_LIMIT_SIDE_LEN=960      # text_det_limit_side_len [web:16]
TEXT_DET_LIMIT_TYPE=max          # text_det_limit_type [web:16]
TEXT_DET_THRESH=0.3              # text_det_thresh [web:16]
TEXT_DET_BOX_THRESH=0.6          # text_det_box_thresh [web:16]
TEXT_DET_UNCLIP_RATIO=2.0        # text_det_unclip_ratio [web:16]

# Text recognition
TEXT_REC_BATCH=2                 # text_recognition_batch_size [web:16]
TEXT_REC_SCORE_THRESH=0.0        # text_rec_score_thresh [web:16]

# Textline orientation
TEXTLINE_ORI_BATCH=1             # textline_orientation_batch_size [web:16]

# Tables / optional modules
CHART_BATCH=1                    # chart_recognition_batch_size [web:16]
FORMULA_BATCH=1                  # formula_recognition_batch_size [web:16]

# Seals
SEAL_DET_LIMIT_SIDE_LEN=736      # seal_det_limit_side_len [web:16]
SEAL_DET_LIMIT_TYPE=min          # seal_det_limit_type [web:16]
SEAL_DET_THRESH=0.2              # seal_det_thresh [web:16]
SEAL_DET_BOX_THRESH=0.6          # seal_det_box_thresh [web:16]
SEAL_DET_UNCLIP_RATIO=0.5        # seal_det_unclip_ratio [web:16]

# =========================
# Device/backend (CPU-only)
# =========================
DEVICE=cpu                       # device [web:16]
ENABLE_HPI=False                 # keep off on CPU [web:16]
USE_TENSORRT=False               # GPU only [web:16]
PRECISION=fp32                   # precision [web:16]
