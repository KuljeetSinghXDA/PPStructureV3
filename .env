# =========================
# Service settings
# =========================
APP_HOST=0.0.0.0                 # Bind address inside container; Dokploy maps domain externally. [web:16]
APP_PORT=8080                    # Container port; set the same in Dokploy's container port mapping. [web:16]

# =========================
# CPU performance tuning
# =========================
CPU_THREADS=4                    # PP-StructureV3 CPU inference threads (maps to cpu_threads). [web:16]
OMP_NUM_THREADS=4                # OpenMP threads for underlying kernels. [web:16]
MKL_NUM_THREADS=4                # MKL threads for BLAS ops. [web:16]
OPENBLAS_NUM_THREADS=4           # OpenBLAS threads for BLAS ops. [web:16]
ENABLE_MKLDNN=True               # Enable MKL-DNN in Paddle Inference (enable_mkldnn). [web:16]

# =========================
# Pipeline toggles (optimize for English lab reports)
# =========================
USE_DOC_ORIENTATION=False        # Document orientation classification (use_doc_orientation_classify). [web:16]
USE_UNWARP=False                 # Text image unwarping UVDoc (use_doc_unwarping). [web:16]
USE_TEXTLINE_ORI=False           # Text line orientation classifier (use_textline_orientation). [web:16]
USE_REGION_DET=True              # Region detection (use_region_detection). [web:16]
USE_TABLE=True                   # Table recognition sub-pipeline (use_table_recognition). [web:16]
USE_FORMULA=False                # Formula recognition sub-pipeline (use_formula_recognition). [web:16]
USE_CHART=False                  # Chart parsing (use_chart_recognition). [web:16]
USE_SEAL=False                   # Seal recognition sub-pipeline (use_seal_recognition). [web:16]

# =========================
# Language selection (apply English-only tip)
# =========================
OCR_LANG=en                      # Forces English recognition via PP-StructureV3(lang="en"). [web:16]

# =========================
# Flagship model pins (names must match PP-StructureV3 registry)
# =========================
# Layout/Region
LAYOUT_MODEL=PP-DocLayout_plus-L             # Latest flagship layout model for PP-StructureV3. [web:16][web:99]
REGION_MODEL=PP-DocBlockLayout               # Region/block detector for reading order stabilization. [web:16]

# OCR (server/high-accuracy)
TEXT_DET_MODEL=PP-OCRv5_server_det           # Text detection (server). [web:18]
TEXT_REC_MODEL=                              # Leave empty so lang=en selects the English recognizer automatically. [web:16]

# Table pipeline (structure/classification/cell detection)
TABLE_CLS_MODEL=PP-LCNet_x1_0_table_cls      # Table orientation/classification. [web:16]
TABLE_STRUCT_WIRED=SLANeXt_wired             # Wired table structure recognizer. [web:16]
TABLE_STRUCT_WIRELESS=SLANeXt_wireless       # Wireless table structure recognizer. [web:16]
TABLE_CELL_DET_WIRED=RT-DETR-L_wired_table_cell_det       # Wired table cell detector. [web:16]
TABLE_CELL_DET_WIRELESS=RT-DETR-L_wireless_table_cell_det # Wireless table cell detector. [web:16]

# Formula pipeline (kept off by default; enable if needed)
FORMULA_MODEL=PP-FormulaNet_plus-L           # Flagship formula recognizer. [web:16]

# Chart pipeline (kept off by default; enable if needed)
CHART_MODEL=PP-Chart2Table                   # Chart-to-table parser. [web:16]

# Seal pipeline (kept off by default; enable if needed)
SEAL_DET_MODEL=PP-OCRv4_server_seal_det      # Seal/stamp detector. [web:16]

# =========================
# Batch/threshold tuning (defaults mirror docs; override as needed)
# =========================
# Layout
LAYOUT_THRESHOLD=0.5             # layout_threshold (0-1). [web:16]
LAYOUT_NMS=True                  # layout_nms (bool). [web:16]
LAYOUT_UNCLIP_RATIO=1.0          # layout_unclip_ratio (>0). [web:16]
LAYOUT_MERGE_MODE=large          # layout_merge_bboxes_mode. [web:16]

# Text detection (DB-like)
TEXT_DET_LIMIT_SIDE_LEN=960      # text_det_limit_side_len (>0). [web:16]
TEXT_DET_LIMIT_TYPE=max          # text_det_limit_type: min|max. [web:16]
TEXT_DET_THRESH=0.3              # text_det_thresh (>0). [web:16]
TEXT_DET_BOX_THRESH=0.6          # text_det_box_thresh (>0). [web:16]
TEXT_DET_UNCLIP_RATIO=2.0        # text_det_unclip_ratio (>0). [web:16]

# Text recognition
TEXT_REC_BATCH=2                 # text_recognition_batch_size. [web:16]
TEXT_REC_SCORE_THRESH=0.0        # text_rec_score_thresh (retain all by default). [web:16]

# Textline orientation
TEXTLINE_ORI_BATCH=1             # textline_orientation_batch_size. [web:16]

# Tables
CHART_BATCH=1                    # chart_recognition_batch_size. [web:16]
FORMULA_BATCH=1                  # formula_recognition_batch_size. [web:16]

# Seals (detector thresholds)
SEAL_DET_LIMIT_SIDE_LEN=736      # seal_det_limit_side_len. [web:16]
SEAL_DET_LIMIT_TYPE=min          # seal_det_limit_type: min|max. [web:16]
SEAL_DET_THRESH=0.2              # seal_det_thresh (>0). [web:16]
SEAL_DET_BOX_THRESH=0.6          # seal_det_box_thresh (>0). [web:16]
SEAL_DET_UNCLIP_RATIO=0.5        # seal_det_unclip_ratio (>0). [web:16]

# =========================
# Device/backend (CPU-only on Ampere A1)
# =========================
DEVICE=cpu                       # device (cpu). [web:16]
ENABLE_HPI=False                 # enable_hpi (keep False on CPU). [web:16]
USE_TENSORRT=False               # GPU-only; must stay False on CPU. [web:16]
PRECISION=fp32                   # precision (fp32). [web:16]
