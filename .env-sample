# =========================================================================
# PP-StructureV3 Environment Variables
# =========================================================================

# --- Core Configuration ---
# Device to run inference on. Use 'cpu' for ARM64.
DEVICE=cpu
# Language for OCR. 'en' for English.
OCR_LANG=en
# Number of CPU threads for inference.
CPU_THREADS=4
# Cap OpenBLAS threads to avoid oversubscription.
OPENBLAS_NUM_THREADS=1
# Cap OpenMP threads to avoid oversubscription.
OMP_NUM_THREADS=1
# Pin OpenBLAS core type to avoid ISA misdetection on ARM.
OPENBLAS_CORETYPE=ARMV8
# Enable Intel MKLDNN for CPU acceleration (off by default on ARM).
ENABLE_MKLDNN=false
# Paddle global flag mirroring MKLDNN usage (0=off, 1=on).
FLAGS_use_mkldnn=0
# Enable High-Performance Inference (HPI) for specific optimizations.
ENABLE_HPI=false
# Reduce Paddle/GLOG verbosity (2=warnings and above).
GLOG_minloglevel=2
# Tensor GC eager delete threshold in GB (0.0 disables).
FLAGS_eager_delete_tensor_gb=0.0

# --- Optional Feature Modules (disabled by default for stability) ---
# Enable automatic document orientation classification.
USE_DOC_ORIENTATION_CLASSIFY=false
# Enable document image unwarping for distorted pages.
USE_DOC_UNWARPING=false
# Enable text line orientation classification.
USE_TEXTLINE_ORIENTATION=false
# Enable table structure recognition (recommended to keep true for documents).
USE_TABLE_RECOGNITION=true
# Enable mathematical formula recognition.
USE_FORMULA_RECOGNITION=false
# Enable chart parsing and recognition.
USE_CHART_RECOGNITION=false

# --- Model Selection (leave empty for auto-selection) ---
# Specify a custom layout detection model name.
LAYOUT_DETECTION_MODEL_NAME=
# Specify a custom text detection model name.
TEXT_DETECTION_MODEL_NAME=
# Specify a custom text recognition model name.
TEXT_RECOGNITION_MODEL_NAME=
# Specify a custom wired table structure recognition model.
WIRED_TABLE_STRUCTURE_RECOGNITION_MODEL_NAME=
# Specify a custom wireless table structure recognition model.
WIRELESS_TABLE_STRUCTURE_RECOGNITION_MODEL_NAME=
# Specify a custom table classification model.
TABLE_CLASSIFICATION_MODEL_NAME=
# Specify a custom formula recognition model.
FORMULA_RECOGNITION_MODEL_NAME=
# Specify a custom chart recognition model.
CHART_RECOGNITION_MODEL_NAME=

# --- Thresholds and Limits ---
# Confidence threshold for layout detection.
LAYOUT_THRESHOLD=0.5
# Confidence threshold for text detection.
TEXT_DET_THRESH=0.3
# Binarization threshold for text box prediction.
TEXT_DET_BOX_THRESH=0.6
# Unclip ratio for text box expansion.
TEXT_DET_UNCLIP_RATIO=2.0
# Limit for the long side of the input image for text detection.
TEXT_DET_LIMIT_SIDE_LEN=960
# Limit type ('max' or 'min') for TEXT_DET_LIMIT_SIDE_LEN.
TEXT_DET_LIMIT_TYPE=max
# Confidence threshold for text recognition.
TEXT_REC_SCORE_THRESH=0.0
# Batch size for text recognition.
TEXT_RECOGNITION_BATCH_SIZE=1

# --- API Restrictions ---
# Comma-separated list of allowed file extensions.
ALLOWED_EXTENSIONS=.pdf,.jpg,.jpeg,.png,.bmp
# Maximum allowed file size in megabytes.
MAX_FILE_SIZE_MB=50

# --- Server Concurrency ---
# Max parallel predictions sharing one pipeline (1 = fully serialized).
MAX_PARALLEL_PREDICT=1
